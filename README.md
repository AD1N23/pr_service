# PR Reviewer Service

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ä–µ–≤—å—é–µ—Ä–æ–≤ –Ω–∞ Pull Request'—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–∞–Ω–¥—ã. –°–µ—Ä–≤–∏—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–º–∞–Ω–¥–∞–º–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞—Ç—å —Ä–µ–≤—å—é–µ—Ä–æ–≤ –Ω–∞ PR'—ã, –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∞—Ç—å —Ä–µ–≤—å—é–µ—Ä–æ–≤ –∏ –ø–æ–ª—É—á–∞—Ç—å —Å–ø–∏—Å–æ–∫ PR'–æ–≤, –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∑–Ω–∞—á–µ–Ω —Ä–µ–≤—å—é–≤–µ—Ä–æ–º.
## –ê–≤—Ç–æ—Ä —Ä–µ—à–µ–Ω–∏—è 

–ü–æ–º—ã–∫–∏–Ω –ú–∏—Ö–∞–∏–ª tg: @ad1n23

## –û–ø–∏—Å–∞–Ω–∏–µ

**PR Reviewer Service** ‚Äî REST API —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π:

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç **–¥–æ 2 –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–µ–≤—å—é–µ—Ä–æ–≤** –∏–∑ –∫–æ–º–∞–Ω–¥—ã –∞–≤—Ç–æ—Ä–∞ –Ω–∞ –∫–∞–∂–¥—ã–π –Ω–æ–≤—ã–π PR
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∞—Ç—å —Ä–µ–≤—å—é–µ—Ä–æ–≤ –Ω–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö PR'–∞—Ö
- –ó–∞–ø—Ä–µ—â–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–µ–≤—å—é–µ—Ä–æ–≤ –ø–æ—Å–ª–µ merge PR'–∞
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ò—Å–∫–ª—é—á–∞–µ—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`isActive = false`) –∏–∑ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ PR'–æ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ–≤—å—é–≤–µ—Ä–∞

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose
- Go 1.25.4+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/AD1N23/pr_service.git
cd pr_service

# 2. –ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
docker-compose up --build

# 3. –°–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8080
```

–ö–æ–º–∞–Ω–¥–∞ `docker-compose up` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–æ–∑–¥–∞—ë—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä PostgreSQL
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ö–µ–º—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ó–∞–ø—É—Å–∫–∞–µ—Ç Go –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ


### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ volume)
docker-compose down

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
docker-compose down -v
```

## API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è


### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### 1. **POST /team/add** ‚Äî –°–æ–∑–¥–∞—Ç—å –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É

#### 2. **GET /team/get** ‚Äî –ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

#### 3. **POST /pullRequest/create** ‚Äî –°–æ–∑–¥–∞—Ç—å PR (–Ω–∞–∑–Ω–∞—á–∏—Ç—å —Ä–µ–≤—å—é–µ—Ä–æ–≤)

#### 4. **POST /pullRequest/merge** ‚Äî –°–ª–∏—Ç—å PR (–∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ MERGED)

#### 5. **POST /pullRequest/reassign** ‚Äî –ü–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∏—Ç—å —Ä–µ–≤—å—é–≤–µ—Ä–∞

#### 6. **GET /users/getReview** ‚Äî –ü–æ–ª—É—á–∏—Ç—å PR'—ã —Ä–µ–≤—å—é–≤–µ—Ä–∞
## üóÑÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

#### 1. teams (–∫–æ–º–∞–Ω–¥—ã)

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
| :-- | :-- | :-- |
| team_name | VARCHAR(255) PRIMARY KEY | –ò–º—è –∫–æ–º–∞–Ω–¥—ã |

#### 2. users (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
| :-- | :-- | :-- |
| user_id | VARCHAR(255) PRIMARY KEY | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| user_name | VARCHAR(255) | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| team_name | VARCHAR(255), FK ‚Üí teams(team_name) | –ü—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –∫ –∫–æ–º–∞–Ω–¥–µ |
| is_active | BOOLEAN | –§–ª–∞–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ |

#### 3. pull_requests (PR)

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
| :-- | :-- | :-- |
| pull_request_id | VARCHAR(255) PRIMARY KEY | ID PR |
| pull_request_name | VARCHAR(255) | –ù–∞–∑–≤–∞–Ω–∏–µ PR |
| author_id | VARCHAR(255), FK ‚Üí users(user_id) | –ê–≤—Ç–æ—Ä PR |
| status | VARCHAR(10) (OPEN/MERGED) | –°—Ç–∞—Ç—É—Å |
| created_at | TIMESTAMPTZ | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |
| merged_at | TIMESTAMPTZ (nullable) | –î–∞—Ç–∞ —Å–ª–∏—è–Ω–∏—è |

#### 4. pull_requests_reviewers (–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≤—å—é–µ—Ä–æ–≤)

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
| :-- | :-- | :-- |
| pull_request_id | VARCHAR(255), FK ‚Üí pull_requests(pull_request_id) | PR |
| user_id | VARCHAR(255), FK ‚Üí users(user_id) | –†–µ–≤—å—é–≤–µ—Ä |
| PRIMARY KEY | (pull_request_id, user_id) |  |
